<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grand Strategy 1936 â€” War Room</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Map Libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
</head>

<body>

    <div id="start-screen">
        <div class="start-bg"></div>
        <div class="start-content">
            <div class="start-title-block">
                <div class="start-subtitle">GRAND STRATEGY â€¢ 1936</div>
                <div class="start-title">EUROPA W OGNIU</div>
                <div class="start-desc">II Wojna Åšwiatowa â€” Overhaul 2.0</div>
            </div>
            <div class="country-select-grid" id="country-grid"></div>
        </div>
    </div>

    <div id="game-ui" style="display:none">
        <header class="game-header">
            <div class="hdr-left">
                <span class="hdr-logo">âš”ï¸ 1936</span>
                <span id="hdr-date" class="hdr-date">1936 â€¢ W1</span>
            </div>
            <div class="hdr-center">
                <div id="hdr-country" class="hdr-country">Niemcy</div>
                <div class="hdr-resources">
                    <span>âš™ï¸ <b id="hdr-steel">0</b></span>
                    <span>ğŸ›¢ï¸ <b id="hdr-oil">0</b></span>
                    <span>ğŸ—ï¸ <b id="hdr-ic">0</b></span>
                    <span>ğŸ† <b id="hdr-vp">0</b> VP</span>
                    <span>ğŸ“Š <b id="hdr-stability">0</b>%</span>
                </div>
            </div>
            <div class="hdr-right">
                <div class="speed-control">
                    <div class="speed-btns" id="speed-btns">
                        <button class="speed-btn" data-idx="0">x4</button>
                        <button class="speed-btn" data-idx="1">x2</button>
                        <button class="speed-btn active" data-idx="2">x1</button>
                        <button class="speed-btn" data-idx="3">Â½x</button>
                    </div>
                </div>
                <button id="btn-pause" class="pause-btn">â¸ PAUZA</button>
            </div>
        </header>

        <div class="game-layout">
            <div class="map-section">
                <div class="map-container" id="map-container">
                    <div id="loading-overlay" class="loading-overlay">Wczytywanie danych kartograficznych...</div>
                    <div id="europe-map"></div>

                    <div class="map-info-box" id="map-info" style="display:none">
                        <div id="map-info-name" class="info-title"></div>
                        <div id="map-info-body" class="info-content"></div>
                        <button class="miniwar-btn" id="miniwar-btn">âš”ï¸ Uzasadnij wojnÄ™</button>
                    </div>

                    <div class="map-legend">
                        <div class="legend-title">Sojusze</div>
                        <div class="legend-item"><span style="background:var(--axis-color)"></span> OÅ›</div>
                        <div class="legend-item"><span style="background:var(--allies-color)"></span> Alianci</div>
                        <div class="legend-item"><span style="background:var(--comintern-color)"></span> Komintern</div>
                        <div class="legend-item"><span style="background:var(--neutral-color)"></span> Neutralni</div>
                    </div>
                </div>

                <div class="event-log-container">
                    <div class="log-header">ğŸ“‹ DZIENNIK WYDARZEÅƒ</div>
                    <div class="event-log" id="event-log"></div>
                </div>
            </div>

            <div class="control-panel">
                <div class="panel-tabs">
                    <button class="panel-tab active" data-panel="overview">ğŸ“Š PrzeglÄ…d</button>
                    <button class="panel-tab" data-panel="focus">ğŸŒ² Fokusy</button>
                    <button class="panel-tab" data-panel="tech">ğŸ”¬ Tech</button>
                    <button class="panel-tab" data-panel="production">ğŸ­ Prod</button>
                    <button class="panel-tab" data-panel="diplomacy">ğŸŒ Dyplo</button>
                </div>
                <div class="panel-content" id="panel-content"></div>
            </div>
        </div>
    </div>

    <div class="event-overlay" id="event-overlay">
        <div class="event-box">
            <div class="event-title" id="event-title"></div>
            <div class="event-msg" id="event-msg"></div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script src="data.js"></script>
    <script src="game.js"></script>
    <script>
        const engine = new GameEngine();
        const countryGrid = document.getElementById('country-grid');
        Object.entries(GAME_DATA.countries).forEach(([id, c]) => {
            const card = document.createElement('div');
            card.className = 'country-card';
            card.innerHTML = `
    <div class="country-flag">${c.flag}</div>
    <div class="country-name">${c.name}</div>
    <div class="country-ideology ${c.ideology}">${c.ideology}</div>
  `;
            card.addEventListener('click', () => {
                document.getElementById('start-screen').style.display = 'none';
                engine.init(id);
            });
            countryGrid.appendChild(card);
        });
    </script>
</body>

</html>